# Synthesizer Flow

致力于构建模块化合成器

使用NextJs全栈框架，使用ReactFlow提供UI支持，使用Zustand提供状态管理，使用Mitt做事件总线。

## 系统设计方案

1. 使用事件总线
2. 使用统一的状态管理
3. 使用领域模型
4. 使用单向数据流

## 各模型设计

## 连接例子

1. 用户界面层：用户在Flow图上拖拽连线 → 触发React Flow的onConnect事件
2. 事件触发被推送到eventBus上
3. 连接管理服务会验证有效性，更新统一状态管理系统，并发布连接创建事件
4. 对应领域模型处理连接事件，音频服务会找到两个模块实例，并进行连接

## TODO:

### 短期目标

- 设计引入事件总线，减少组件和服务间的直接依赖。
- 优化状态存储系统，使得工作区内的所有状态都被统一管理。特别是参数，我觉得模块的创建使用等操作需要更加oop
- 优化数据流：User Input → Store Action → State Update → UI Render → Audio Engine Update
- 提供基础声音支持

### 长期目标

- 添加持久化
- 添加可视化模块
- 模块的调制UI改进，存储格式改进，所有参数都应该可以被调制以实现自动化
- 提供时序端口，可以控制节拍，节拍可以控制音序器或者piano roll，并自动输出midi信号，也可以控制自动化模块，提供调制
