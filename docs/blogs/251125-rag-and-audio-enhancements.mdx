---
title: '深化智能与听感：Neon向量数据库与新合成器'
date: '2025-11-25'
tags: ['RAG', 'Vector Database', 'Neon', 'Audio Synthesis', 'LangChain']
draft: false
summary: '在初步尝试AI之后，我们决定玩点真的。本文介绍了我们将RAG系统迁移到Neon Vector Store的架构升级，以及全新的紧凑型合成器模块。'
---

# 深化智能与听感：Neon向量数据库与新合成器

进入2025年底，SynthesizerFlow的0.7.6至0.7.8版本主要集中在两个维度的深化：让AI更聪明（Memory），让声音更好听（Sound）。

## 1. 严肃的RAG：迁移至 Neon Postgres

早期的RAG实验使用了简单的本地向量存储或临时的云服务，但这在生产环境中不够可靠。在0.7.8版本中，我们决定采用**Neon Database**作为我们的长期记忆存储。

Neon不仅是一个优秀的Serverless Postgres，它还原生支持**pgvector**扩展。这意味着我们可以将业务数据（用户、项目）和AI向量数据（文档embeddings）存储在同一个数据库中。

### 架构优势
- **一致性**：不需要维护两个分离的数据库系统。
- **性能**：Postgres的查询优化器非常强大，即便是混合查询（关键词搜索+向量相似度）也能毫秒级响应。
- **LangChain集成**：我们使用`langchain/vectorstores/neon`实现了无缝对接。

现在，当用户询问复杂问题时，系统能够在毫秒级内从数千条知识条目中找到最精准的答案。

## 2. 声音的进化：Compact Synthesizer

在沉迷AI开发的同时，我们没有忘记这是一个**合成器**软件。社区反馈之前的`Source`模块虽然强大，但对于做一些简单的声音来说太占地方了。

为此，我们设计了全新的**Compact Synthesizer（紧凑型合成器）**模块。
- **二合一设计**：将振荡器(Oscillator)和包络生成器(Envelope)通过内部硬连线集成在一个小巧的面板中。
- **即插即用**：不需要繁琐的连线，拖出来就能发出有动态的声音。

这大大简化了复杂Patch的构建过程，让画布显得更加整洁。

## 3. 钢琴输入的细腻触感

如果你是一名键盘手，你一定知道**触后（Aftertouch）**的重要性。在0.7.7版本中，我们升级了MIDI输入系统，正式支持了Polyphonic Aftertouch（复音触后）。

这意味着当你按下琴键后，继续用力深按，可以控制颤音深度或滤波器截止频率。这种表现力的提升让SynthesizerFlow足以应对专业的演奏需求。

## 结语

这一阶段我们致力于"修炼内功"。Neon数据库的引入为强大的RAG系统提供了基础设施，而音频模块的改进则守住了作为乐器的本分。

技术在进步，但我们的核心目标未变：让音乐创作既智能又富有表现力。
